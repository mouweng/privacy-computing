# 多方安全计算

## 定义

> 安全多方计算MPC是密码学的一个子领域，目的是多个参与方协同地从每一方的隐私输入中计算某个函数的结果，从而不用将这些输入数据展示给其他方。

MPC最初针对的是一个安全两方计算问题（即著名的百万富翁问题）而被正式提出的。

当前主要有三种常用的隐私计算框架，可以用来实现安全多方计算：秘密共享、不经意传输、混淆电路

## 百万富翁问题

> 两个百万富翁都想要比较到底谁更加富有，但是又都不想让别人知道自己有多少钱。如何在一个没有可信的第三方的情况下解决这个问题？

该问题在1982年由姚期智教授提出，在1987年由Goldreich等人推广至多方场景。

## 秘密共享

> 秘密共享就是指将要共享的秘密在一个用户群体里面进行合理分配，以达到由所有成员共同掌管秘密的目的。

秘密共享通过将原始秘密值A分割为随机多份，比如分割成n份，记为`A1,A2,...,An`，并将这些份分发给`n`个不同的参与方。当且仅当足够数量（比如至少`t`个）的秘密值组合在一起时，才能够重新构造被共享的秘密，而任意的`t-1`个秘密值都不能重构原始数据。

## 不经意传输

> 不经意传输中，发送方拥有一个“消息-索引”对`(M1,1),...,(Mn,n)`,在每次传输时，接收方选择一个索引`i（0～n）`，并接受`Mi`。接收方不能得知除了`Mi`以外的任何信息，发送方也不能了解关于接收方选择的具体哪个索引对的信息。

在实际使用中，不经意传输的一种实施方式时基于RSA公钥加密技术的。

- 发送方生成两对不同的公私钥，并公开两个公钥`pk1`和`pk2`。
- 假设接收方希望收到消息M1，但不希望发送方知道他想要收到的消息时M1。接收方随机生成一个随机数k，再用公钥pk1对k进行加密，并传输给发送方。
- 发送方用两个私钥对加密后的k进行解密，私钥sk1解密得到k1，私钥sk2解密得到k2。（只有k1等于k，k2时一个无意义的数字）。但发送方并不知道哪个是真正的k
- 发送方把m1和k进行异或，把m2和k2进行异或，并把两个异或的结果都发送给接收方
- 接收方使用k与收到的消息进行异或。接收方只能算出m1，而无法推测出m2。因为接收方无法知道私钥sk2，从而推不出k2的值，而且发送方也不知道接收方能算出哪个消息。
- 接收方可以进一步通过CRC校验来确定m1是正确收到的消息。

## 混淆电路

> 混淆电路是姚期智教授提出的安全多方计算概念。
>
> 混淆电路的思想是通过布尔电路的观点构造安全函数计算，使得参与方可以针对某个数值来计算答案，而不需要知道他们在计算式中输入的具体数字。

中心思想是将计算电路分解为产生阶段和求值阶段。两个参与方各自负责一个阶段，而在每一阶段中电路都被加密处理，所以任何一方都不能从其他方获取信息，但仍然可以根据电路获取结果。

## 基于python的安全计算库

| 计算库               | 描述                                                         |
| -------------------- | ------------------------------------------------------------ |
| Pycrypto             | 提供常用的加/解密算法的实现，包括AES、DES、RSA、ElGamal等常用算法，还包括常用的散列函数（SHA256和RIPEMD160等） |
| Pycryptodome         | 是Pycrypto的一个分支，提供更加丰富的加/解密算法，包括秘密共享算法。 |
| Paillier             | 提供了支持部分同态加密（例如加法和标量乘法同态加密）的python3实现 |
| differential-privacy | 提供了常用的差分隐私方法的实现                               |
| diffprivlib          | IBM公司开源，提供了常用的差分隐私方法的实现                  |
| MPyC                 | 提供了基于有限域上的阈值秘密共享，即使用Shamir的门限阈值密码共享方案以及伪随机秘密共享 |

